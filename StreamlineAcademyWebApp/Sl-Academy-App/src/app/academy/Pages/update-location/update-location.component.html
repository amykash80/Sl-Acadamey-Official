<div class="container my-5">
  <div class="row mb-4">
    <div class="col">
      <nav aria-label="breadcrumb" class="bg-body-tertiary rounded-3 p-3 custom-breadcrumb">
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item" style="cursor: pointer;" routerLink="/academy/dashboard">academy</li>
          <li class="breadcrumb-item active" aria-current="page">update-loaction</li>
        </ol>
      </nav>
    </div>
  </div>
    <div class="row gy-4 justify-content-center">
      <div class="col-lg-6 col-xl-9">
        <form method="POST" #updateLocationForm="ngForm" class="register-form ajax-contact">
          <h5 class="form-title">Update Location</h5>
          <div class="row">
            <div class="form-group col-md-6">
              <label>Address*</label>
              <input
                type="text"
                class="form-control style-white"
                name="address"
                ngModel
                #address="ngModel"
                [(ngModel)]="location.address"
                [class.is-invalid]="address.touched && address.invalid"
                required
                placeholder=""
              />
              <div *ngIf="address.touched && address.errors?.['required']" class="error-message">Address is required</div>
            </div>
            <div class="form-group col-md-6">
              <label>Postal Code*</label>
              <input
                type="number"
                class="form-control style-white"
                name="postalCode"
                ngModel
                #postalCode="ngModel"
                [(ngModel)]="location.postalCode"
                [class.is-invalid]="postalCode.touched && postalCode.invalid"
                required
                minlength="6"
                placeholder=""
              />
              <div *ngIf="postalCode.touched && postalCode.errors?.['required']" class="error-message">Postal code is required</div>
              <div *ngIf="postalCode.touched && postalCode.errors?.['minlength']" class="error-message">Postal code must be at least 6 characters</div>
            </div>
  
            <div class="form-group col-md-6">
              <label>Latitude*</label>
              <input
                type="number"
                class="form-control style-white"
                name="latitude"
                ngModel
                #latitude="ngModel"
                [(ngModel)]="location.latitude"
                [class.is-invalid]="latitude.touched && latitude.invalid"
                required
                min="-90"
                max="90"
                placeholder=""
              />
              <div *ngIf="latitude.touched && latitude.errors?.['required']" class="error-message">Latitude is required</div>
              <div *ngIf="latitude.touched && (latitude.errors?.['min'] || latitude.errors?.['max'])" class="error-message">Latitude must be between -90 and 90</div>
            </div>
  
            <div class="form-group col-md-6">
              <label>Longitude*</label>
              <input
                type="number"
                class="form-control style-white"
                name="longitude"
                ngModel
                #longitude="ngModel"
                [(ngModel)]="location.longitude"
                [class.is-invalid]="longitude.touched && longitude.invalid"
                required
                min="-180"
                max="180"
                placeholder=""
              />
              <div *ngIf="longitude.touched && longitude.errors?.['required']" class="error-message">Longitude is required</div>
              <div *ngIf="longitude.touched && (longitude.errors?.['min'] || longitude.errors?.['max'])" class="error-message">Longitude must be between -180 and 180</div>
            </div>
  
            <div class="form-group col-md-6">
              <label>Country*</label>
              <select
                class="form-control "
                name="countryId"
                #countryId="ngModel"
                (change)="filterStates($event)"
                [(ngModel)]="location.countryId"
                [class.is-invalid]="countryId.touched && countryId.invalid"
                required
                placeholder=""
              >
              <option value="">Select Country</option>
              <option *ngFor="let country of countries" [value]="country.id">{{ country.countryName }}</option>
               
              </select>
              <div *ngIf="countryId.touched && countryId.errors?.['required']" class="error-message">Country is required</div>
            </div>
  
            <div class="form-group col-md-6">
              <label>State*</label>
              <select
                class="form-control "
                name="stateId"
                ngModel
                #stateId="ngModel"
                [(ngModel)]="location.stateId"
              (change)="filteredCities($event)"
                [class.is-invalid]="stateId.touched && stateId.invalid"
                required
                placeholder=""
              >
              <option value="">Select state</option>
              <option *ngFor="let state of states" [value]="state.id">{{ state.stateName }}</option>
              </select>
              <div *ngIf="stateId.touched && stateId.errors?.['required']" class="error-message">State is required</div>
            </div>
  
            <div class="form-group col-md-6">
                <label>City*</label>
                <select
                  class="form-control"
                  name="cityId"
                  ngModel
                  #cityId="ngModel"
                  [(ngModel)]="location.cityId"
                  [class.is-invalid]="cityId.touched && cityId.invalid"
                  required
                >
                  <option value="">Select City</option>
                  <option *ngFor="let city of cities" [value]="city.id">{{ city.cityName }}</option>
                </select>
                <div *ngIf="cityId.touched && cityId.invalid && cityId.errors?.['required']" class="error-message">City required</div>
              </div>
  
            <div class="form-btn col-12 text-center">
              <button class="th-btn w-100" [disabled]="updateLocationForm.invalid" (click)="updateLocation()">
               <app-spinner *ngIf="loadSpinner"></app-spinner> Update Now</button>
            </div>
          </div>
          <p class="form-messages mb-0 mt-3"></p>
        </form>
      </div>
    </div>
  </div>